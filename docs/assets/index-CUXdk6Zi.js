var e=Object.defineProperty,n=(n,t,i)=>((n,t,i)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i)(n,"symbol"!=typeof t?t+"":t,i);import{p as t}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();class i extends t.Scene{constructor(){super("Boot")}create(){this.scene.start("Preloader")}}const s=10,c={width:810,height:490};var o=(e=>(e.Nine="9",e.Ten="10",e.A="A",e.H1="H1",e.H2="H2",e.H3="H3",e.H4="H4",e.H5="H5",e.H6="H6",e.J="J",e.K="K",e.M1="M1",e.M2="M2",e.M3="M3",e.M4="M4",e.M5="M5",e.M6="M6",e.Q="Q",e))(o||{});const a={[o.M1]:.1,[o.M2]:.2,[o.M3]:.3,[o.M4]:.4,[o.M5]:.5,[o.M6]:.6,[o.Nine]:.7,[o.Ten]:.8,[o.J]:.9,[o.Q]:1,[o.K]:1.1,[o.A]:1.2,[o.H1]:1.3,[o.H2]:1.4,[o.H3]:1.5,[o.H4]:1.6,[o.H5]:1.7,[o.H6]:1.8};var l=(e=>(e.NineConnect="9_connect",e.Nine="9",e.TenConnect="10_connect",e.Ten="10",e.AConnect="A_connect",e.A="A",e.H1Connect="H1_connect",e.H1="H1",e.H2Connect="H2_connect",e.H2="H2",e.H3Connect="H3_connect",e.H3="H3",e.H4Connect="H4_connect",e.H4="H4",e.H5Connect="H5_connect",e.H5="H5",e.H6Connect="H6_connect",e.H6="H6",e.JConnect="J_connect",e.J="J",e.KConnect="K_connect",e.K="K",e.M1Connect="M1_connect",e.M1="M1",e.M2Connect="M2_connect",e.M2="M2",e.M3Connect="M3_connect",e.M3="M3",e.M4Connect="M4_connect",e.M4="M4",e.M5Connect="M5_connect",e.M5="M5",e.M6Connect="M6_connect",e.M6="M6",e.QConnect="Q_connect",e.Q="Q",e))(l||{});const r={[o.A]:l.AConnect,[o.H1]:l.H1Connect,[o.H2]:l.H2Connect,[o.H3]:l.H3Connect,[o.H4]:l.H4Connect,[o.H5]:l.H5Connect,[o.H6]:l.H6Connect,[o.J]:l.JConnect,[o.K]:l.KConnect,[o.M1]:l.M1Connect,[o.M2]:l.M2Connect,[o.M3]:l.M3Connect,[o.M4]:l.M4Connect,[o.M5]:l.M5Connect,[o.M6]:l.M6Connect,[o.Nine]:l.NineConnect,[o.Q]:l.QConnect,[o.Ten]:l.TenConnect};class h extends t.Scene{constructor(){super("Game"),n(this,"camera"),n(this,"msg_text"),n(this,"reelsData"),n(this,"reels"),n(this,"mask"),n(this,"balance"),n(this,"winnings"),n(this,"betAmount"),n(this,"spin"),n(this,"balanceText"),n(this,"isSpinning"),n(this,"winRectangle"),n(this,"winText"),this.balance=123456789,this.betAmount=15,this.winnings=0,this.spin=!1,this.isSpinning=!1}init(){const e=this.scale.width/2,n=this.scale.height/2;this.add.rectangle(e,n,c.width,c.height,6710886);const t=this.add.graphics();t.fillRect(e-c.width/2,n-c.height/2,c.width,c.height),this.mask=t.createGeometryMask(),this.randomizeSymbols()}randomizeSymbols(){this.reelsData=new Array(5).fill(null).map((()=>(()=>{const e=Object.values(o);return new Array(3).fill(null).map((()=>{const n=(t=e.length-1,Math.floor(Math.random()*(t-0+1))+0);var t;const i=e[n];return e.splice(n,1),i}))})()))}makeReels(e=!1){const n=this.scale.width/2,t=this.scale.height/2,i=(o=this.add,(e,n,t)=>{const i=o.sprite(e,n,t);return i.setScale(.75,.75),i});var o;this.reels=this.reelsData.map(((o,a)=>{const l=n-c.width/2+s+75+160*a,r=t-c.height/2+s,h=t-c.height/2-470-s,g=this.add.container(l,e?h:r,o.map(((e,n)=>i(0,75+160*n,e))));return g.setMask(this.mask),e&&this.tweens.add({targets:g,y:r,duration:300,ease:"linear",delay:150*a}),g}))}create(){const e=this.scale.width/2,n=this.scale.height/2;this.camera=this.cameras.main,this.camera.setBackgroundColor(3355443);const i={x:e-100,y:n+c.height/2+30,width:200,height:60};if(this.balance>=this.betAmount){const e=this.add.graphics();e.fillStyle(3381555,1),e.fillRoundedRect(i.x,i.y,i.width,i.height,20),e.setInteractive(new t.Geom.Rectangle(i.x,i.y,i.width,i.height),t.Geom.Rectangle.Contains),e.on("pointerdown",(()=>{this.isSpinning||(this.spin=!0,this.balance-=this.betAmount,this.isSpinning=!0,this.winRectangle&&this.winRectangle.destroy(),this.winText&&this.winText.destroy(),this.scene.start("Game"))})),this.msg_text=this.add.text(i.x+i.width/2,i.y+i.height/2,"Spin",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.msg_text.setOrigin(.5)}this.balanceText=this.add.text(e,n-c.height/2-60,`Balance: ${this.balance} USD`,{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.balanceText.setOrigin(.5),this.add.text(e-c.width/2-60,n+c.height/2+60,`Bet amount: ${this.betAmount} USD`,{fontFamily:"Arial Black",fontSize:24,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(0,.5);const s=this.add.text(e+c.width/2+60,n+c.height/2+60,`Winnings: ${this.winnings} USD`,{fontFamily:"Arial Black",fontSize:24,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"});s.setOrigin(1,.5),this.makeReels(this.spin),this.spin&&this.time.delayedCall(900,(()=>{this.isSpinning=!1;const{winnings:t,highlights:i}=((e,n)=>{let t=0,i=[];const s=(e=>{const n=e.length,t=e[0].length,i=Array.from({length:t},(()=>Array(n).fill(null)));for(let s=0;s<n;s++)for(let n=0;n<t;n++)i[n][s]=e[s][n];return i})(e);for(let c=0;c<e[0].length;c++){const o=e[0][c],l=s[c];let r=1;const h=[[c,0]];for(let e=1;e<l.length&&l[e]===o;e++)h.push([c,e]),r++;r>=3&&(t+=n*a[o],i=i.concat(h))}return[[[0,0],[1,1],[2,2]],[[2,0],[1,1],[0,2]]].forEach((e=>{const[[c,o],...l]=e,r=s[c][o];l.every((([e,n])=>s[e][n]===r))&&(i=i.concat(e.map((([e,n])=>[e,n]))),t+=n*a[r])})),{winnings:t,highlights:i}})(this.reelsData,this.betAmount);t>0&&(this.balance+=this.betAmount+t,this.balanceText.setText(`Balance: ${this.balance} USD`),this.winnings+=t,s.setText(`Winnings: ${this.winnings} USD`));for(const[e,n]of i){const t=this.reels[n].getAt(e);t.setTexture(r[t.texture.key])}const c={width:600,height:90,x:e,y:n};t>0&&(this.winRectangle=this.add.rectangle(c.x,c.y,c.width,c.height,16776960,.5),this.winText=this.add.text(c.x,c.y,`You won ${t} USD!`,{fontFamily:"Arial Black",fontSize:48,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.winText.setOrigin(.5),this.time.delayedCall(2e3,(()=>{this.winText.destroy(),this.winRectangle.destroy()})))}))}}const g=[{key:l.NineConnect,file:"9_connect.png"},{key:l.Nine,file:"9.png"},{key:l.TenConnect,file:"10_connect.png"},{key:l.Ten,file:"10.png"},{key:l.AConnect,file:"A_connect.png"},{key:l.A,file:"A.png"},{key:l.H1Connect,file:"H1_connect.png"},{key:l.H1,file:"H1.png"},{key:l.H2Connect,file:"H2_connect.png"},{key:l.H2,file:"H2.png"},{key:l.H3Connect,file:"H3_connect.png"},{key:l.H3,file:"H3.png"},{key:l.H4Connect,file:"H4_connect.png"},{key:l.H4,file:"H4.png"},{key:l.H5Connect,file:"H5_connect.png"},{key:l.H5,file:"H5.png"},{key:l.H6Connect,file:"H6_connect.png"},{key:l.H6,file:"H6.png"},{key:l.JConnect,file:"J_connect.png"},{key:l.J,file:"J.png"},{key:l.KConnect,file:"K_connect.png"},{key:l.K,file:"K.png"},{key:l.M1Connect,file:"M1_connect.png"},{key:l.M1,file:"M1.png"},{key:l.M2Connect,file:"M2_connect.png"},{key:l.M2,file:"M2.png"},{key:l.M3Connect,file:"M3_connect.png"},{key:l.M3,file:"M3.png"},{key:l.M4Connect,file:"M4_connect.png"},{key:l.M4,file:"M4.png"},{key:l.M5Connect,file:"M5_connect.png"},{key:l.M5,file:"M5.png"},{key:l.M6Connect,file:"M6_connect.png"},{key:l.M6,file:"M6.png"},{key:l.QConnect,file:"Q_connect.png"},{key:l.Q,file:"Q.png"}];class f extends t.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(n=>{e.width=4+460*n}))}preload(){this.load.setPath("assets/symbols");for(const e of g)this.load.image(e.key,e.file)}create(){this.scene.start("Game")}}const d={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[i,f,h]};new t.Game(d);
